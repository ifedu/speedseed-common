'use strict';
var ghGot = require('gh-got');
module.exports = function (email, token) {
    if (!(typeof email === 'string' && email.includes('@'))) {
        throw new Error('Email required');
    }
    return ghGot('search/users', {
        token: token,
        query: {
            q: email + " in:email"
        },
        headers: {
            'user-agent': 'https://github.com/sindresorhus/github-username'
        }
    }).then(function (result) {
        var data = result.body;
        if (data.total_count === 0) {
            throw new Error("Couldn't find username for `" + email + "`");
        }
        return data.items[0].login;
    });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxnaXRodWItdXNlcm5hbWVcXGluZGV4LmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGlmZWR1XFxBcHBEYXRhXFxSb2FtaW5nXFxudm1cXHY4LjQuMFxcbm9kZV9tb2R1bGVzXFxnZW5lcmF0b3Itc3BlZWRzZWVkXFxub2RlX21vZHVsZXNcXGdpdGh1Yi11c2VybmFtZVxcaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBQ2IsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBRWhDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBQyxLQUFLLEVBQUUsS0FBSztJQUM3QixFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsT0FBTyxLQUFLLEtBQUssUUFBUSxJQUFJLEtBQUssQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDekQsTUFBTSxJQUFJLEtBQUssQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFFRCxNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRTtRQUM1QixLQUFLLE9BQUE7UUFDTCxLQUFLLEVBQUU7WUFDTixDQUFDLEVBQUssS0FBSyxjQUFXO1NBQ3RCO1FBQ0QsT0FBTyxFQUFFO1lBQ1IsWUFBWSxFQUFFLGlEQUFpRDtTQUMvRDtLQUNELENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBQSxNQUFNO1FBQ2IsSUFBTSxJQUFJLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQztRQUV6QixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsV0FBVyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsTUFBTSxJQUFJLEtBQUssQ0FBQyxpQ0FBZ0MsS0FBSyxNQUFJLENBQUMsQ0FBQztRQUM1RCxDQUFDO1FBRUQsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQzVCLENBQUMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuY29uc3QgZ2hHb3QgPSByZXF1aXJlKCdnaC1nb3QnKTtcblxubW9kdWxlLmV4cG9ydHMgPSAoZW1haWwsIHRva2VuKSA9PiB7XG5cdGlmICghKHR5cGVvZiBlbWFpbCA9PT0gJ3N0cmluZycgJiYgZW1haWwuaW5jbHVkZXMoJ0AnKSkpIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0VtYWlsIHJlcXVpcmVkJyk7XG5cdH1cblxuXHRyZXR1cm4gZ2hHb3QoJ3NlYXJjaC91c2VycycsIHtcblx0XHR0b2tlbixcblx0XHRxdWVyeToge1xuXHRcdFx0cTogYCR7ZW1haWx9IGluOmVtYWlsYFxuXHRcdH0sXG5cdFx0aGVhZGVyczoge1xuXHRcdFx0J3VzZXItYWdlbnQnOiAnaHR0cHM6Ly9naXRodWIuY29tL3NpbmRyZXNvcmh1cy9naXRodWItdXNlcm5hbWUnXG5cdFx0fVxuXHR9KS50aGVuKHJlc3VsdCA9PiB7XG5cdFx0Y29uc3QgZGF0YSA9IHJlc3VsdC5ib2R5O1xuXG5cdFx0aWYgKGRhdGEudG90YWxfY291bnQgPT09IDApIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcihgQ291bGRuJ3QgZmluZCB1c2VybmFtZSBmb3IgXFxgJHtlbWFpbH1cXGBgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YS5pdGVtc1swXS5sb2dpbjtcblx0fSk7XG59O1xuIl19