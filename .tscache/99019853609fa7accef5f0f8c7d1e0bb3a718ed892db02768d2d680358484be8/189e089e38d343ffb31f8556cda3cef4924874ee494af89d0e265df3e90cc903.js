/*istanbul ignore start*/ 'use strict';
exports.__esModule = true;
exports.applyPatch = applyPatch;
/*istanbul ignore start*/ exports.applyPatches = applyPatches;
var /*istanbul ignore start*/ _parse = require('./parse') /*istanbul ignore end*/;
var /*istanbul ignore start*/ _distanceIterator = require('../util/distance-iterator') /*istanbul ignore end*/;
/*istanbul ignore start*/
var _distanceIterator2 = _interopRequireDefault(_distanceIterator);
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
/*istanbul ignore end*/ function applyPatch(source, uniDiff) {
    /*istanbul ignore start*/ var /*istanbul ignore end*/ options = arguments.length <= 2 || arguments[2] === undefined ? {} : arguments[2];
    if (typeof uniDiff === 'string') {
        uniDiff = /*istanbul ignore start*/ (0, _parse.parsePatch) /*istanbul ignore end*/(uniDiff);
    }
    if (Array.isArray(uniDiff)) {
        if (uniDiff.length > 1) {
            throw new Error('applyPatch only works with a single input.');
        }
        uniDiff = uniDiff[0];
    }
    // Apply the diff to the input
    var lines = source.split('\n'), hunks = uniDiff.hunks, compareLine = options.compareLine || function (lineNumber, line, operation, patchContent) {
        return (line === patchContent);
    }, errorCount = 0, fuzzFactor = options.fuzzFactor || 0, minLine = 0, offset = 0, removeEOFNL = void 0 /*istanbul ignore end*/, addEOFNL = void 0 /*istanbul ignore end*/;
    /**
     * Checks if the hunk exactly fits on the provided location
     */
    function hunkFits(hunk, toPos) {
        for (var j = 0; j < hunk.lines.length; j++) {
            var line = hunk.lines[j], operation = line[0], content = line.substr(1);
            if (operation === ' ' || operation === '-') {
                // Context sanity check
                if (!compareLine(toPos + 1, lines[toPos], operation, content)) {
                    errorCount++;
                    if (errorCount > fuzzFactor) {
                        return false;
                    }
                }
                toPos++;
            }
        }
        return true;
    }
    // Search best fit offsets for each hunk based on the previous ones
    for (var i = 0; i < hunks.length; i++) {
        var hunk = hunks[i], maxLine = lines.length - hunk.oldLines, localOffset = 0, toPos = offset + hunk.oldStart - 1;
        var iterator = (0, _distanceIterator2.default) /*istanbul ignore end*/(toPos, minLine, maxLine);
        for (; localOffset !== undefined; localOffset = iterator()) {
            if (hunkFits(hunk, toPos + localOffset)) {
                hunk.offset = offset += localOffset;
                break;
            }
        }
        if (localOffset === undefined) {
            return false;
        }
        // Set lower text limit to end of the current hunk, so next ones don't try
        // to fit over already patched text
        minLine = hunk.offset + hunk.oldStart + hunk.oldLines;
    }
    // Apply patch hunks
    for (var _i = 0; _i < hunks.length; _i++) {
        var _hunk = hunks[_i], _toPos = _hunk.offset + _hunk.newStart - 1;
        if (_hunk.newLines == 0) {
            _toPos++;
        }
        for (var j = 0; j < _hunk.lines.length; j++) {
            var line = _hunk.lines[j], operation = line[0], content = line.substr(1);
            if (operation === ' ') {
                _toPos++;
            }
            else if (operation === '-') {
                lines.splice(_toPos, 1);
                /* istanbul ignore else */
            }
            else if (operation === '+') {
                lines.splice(_toPos, 0, content);
                _toPos++;
            }
            else if (operation === '\\') {
                var previousOperation = _hunk.lines[j - 1] ? _hunk.lines[j - 1][0] : null;
                if (previousOperation === '+') {
                    removeEOFNL = true;
                }
                else if (previousOperation === '-') {
                    addEOFNL = true;
                }
            }
        }
    }
    // Handle EOFNL insertion/removal
    if (removeEOFNL) {
        while (!lines[lines.length - 1]) {
            lines.pop();
        }
    }
    else if (addEOFNL) {
        lines.push('');
    }
    return lines.join('\n');
}
// Wrapper that supports multiple file patches via callbacks.
function applyPatches(uniDiff, options) {
    if (typeof uniDiff === 'string') {
        uniDiff = /*istanbul ignore start*/ (0, _parse.parsePatch) /*istanbul ignore end*/(uniDiff);
    }
    var currentIndex = 0;
    function processIndex() {
        var index = uniDiff[currentIndex++];
        if (!index) {
            return options.complete();
        }
        options.loadFile(index, function (err, data) {
            if (err) {
                return options.complete(err);
            }
            var updatedContent = applyPatch(data, index, options);
            options.patched(index, updatedContent);
            setTimeout(processIndex, 0);
        });
    }
    processIndex();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFx5ZW9tYW4tZW52aXJvbm1lbnRcXG5vZGVfbW9kdWxlc1xcZGlmZlxcbGliXFxwYXRjaFxcYXBwbHkuanMiLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xcaWZlZHVcXEFwcERhdGFcXFJvYW1pbmdcXG52bVxcdjguNC4wXFxub2RlX21vZHVsZXNcXGdlbmVyYXRvci1zcGVlZHNlZWRcXG5vZGVfbW9kdWxlc1xceWVvbWFuLWVudmlyb25tZW50XFxub2RlX21vZHVsZXNcXGRpZmZcXGxpYlxccGF0Y2hcXGFwcGx5LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHlCQUF5QixDQUFBLFlBQVksQ0FBQztBQUV0QyxPQUFPLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztBQUMxQixPQUFPLENBQXlCLFVBQVUsR0FBRyxVQUFVLENBQUM7QUFDeEQseUJBQXlCLENBQUEsT0FBTyxDQUF5QixZQUFZLEdBQUcsWUFBWSxDQUFDO0FBRXJGLElBQUkseUJBQXlCLENBQUEsTUFBTSxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQyx1QkFBdUIsQ0FBQztBQUVqRixJQUFJLHlCQUF5QixDQUFBLGlCQUFpQixHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLHVCQUF1QixDQUFDO0FBRTlHLHlCQUF5QjtBQUN6QixJQUFJLGtCQUFrQixHQUFHLHNCQUFzQixDQUFDLGlCQUFpQixDQUFDLENBQUM7QUFFbkUsZ0NBQWdDLEdBQUcsSUFBSSxNQUFNLENBQUMsR0FBRyxJQUFJLEdBQUcsQ0FBQyxVQUFVLEdBQUcsR0FBRyxHQUFHLEVBQUUsT0FBTyxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztBQUUvRix1QkFBdUIsQ0FBQSxvQkFBb0IsTUFBTSxFQUFFLE9BQU87SUFDeEQseUJBQXlC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LENBQUM7UUFFRCxPQUFPLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxVQUFVLEdBQUcsRUFBRSxJQUFJO1lBQ3pDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7Z0JBQ1IsTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDL0IsQ0FBQztZQUVELElBQUksY0FBYyxHQUFHLFVBQVUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLE9BQU8sQ0FBQyxDQUFDO1lBQ3RELE9BQU8sQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLGNBQWMsQ0FBQyxDQUFDO1lBRXZDLFVBQVUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLENBQUM7UUFDOUIsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBQ0QsWUFBWSxFQUFFLENBQUM7QUFDakIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qaXN0YW5idWwgaWdub3JlIHN0YXJ0Ki8ndXNlIHN0cmljdCc7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLiAvKmlzdGFuYnVsIGlnbm9yZSBlbmQqL2FwcGx5UGF0Y2ggPSBhcHBseVBhdGNoO1xuLyppc3RhbmJ1bCBpZ25vcmUgc3RhcnQqL2V4cG9ydHMuIC8qaXN0YW5idWwgaWdub3JlIGVuZCovYXBwbHlQYXRjaGVzID0gYXBwbHlQYXRjaGVzO1xuXG52YXIgLyppc3RhbmJ1bCBpZ25vcmUgc3RhcnQqL19wYXJzZSA9IHJlcXVpcmUoJy4vcGFyc2UnKSAvKmlzdGFuYnVsIGlnbm9yZSBlbmQqLztcblxudmFyIC8qaXN0YW5idWwgaWdub3JlIHN0YXJ0Ki9fZGlzdGFuY2VJdGVyYXRvciA9IHJlcXVpcmUoJy4uL3V0aWwvZGlzdGFuY2UtaXRlcmF0b3InKSAvKmlzdGFuYnVsIGlnbm9yZSBlbmQqLztcblxuLyppc3RhbmJ1bCBpZ25vcmUgc3RhcnQqL1xudmFyIF9kaXN0YW5jZUl0ZXJhdG9yMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2Rpc3RhbmNlSXRlcmF0b3IpO1xuXG5mdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXG4vKmlzdGFuYnVsIGlnbm9yZSBlbmQqL2Z1bmN0aW9uIGFwcGx5UGF0Y2goc291cmNlLCB1bmlEaWZmKSB7XG4gIC8qaXN0YW5idWwgaWdub3JlIHN0YXJ0Ki92YXIgLyppc3RhbmJ1bCBpZ25vcmUgZW5kKi9vcHRpb25zID0gYXJndW1lbnRzLmxlbmd0aCA8PSAyIHx8IGFyZ3VtZW50c1syXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMl07XG5cbiAgaWYgKHR5cGVvZiB1bmlEaWZmID09PSAnc3RyaW5nJykge1xuICAgIHVuaURpZmYgPSAvKmlzdGFuYnVsIGlnbm9yZSBzdGFydCovKDAsIF9wYXJzZS5wYXJzZVBhdGNoKSAvKmlzdGFuYnVsIGlnbm9yZSBlbmQqLyh1bmlEaWZmKTtcbiAgfVxuXG4gIGlmIChBcnJheS5pc0FycmF5KHVuaURpZmYpKSB7XG4gICAgaWYgKHVuaURpZmYubGVuZ3RoID4gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdhcHBseVBhdGNoIG9ubHkgd29ya3Mgd2l0aCBhIHNpbmdsZSBpbnB1dC4nKTtcbiAgICB9XG5cbiAgICB1bmlEaWZmID0gdW5pRGlmZlswXTtcbiAgfVxuXG4gIC8vIEFwcGx5IHRoZSBkaWZmIHRvIHRoZSBpbnB1dFxuICB2YXIgbGluZXMgPSBzb3VyY2Uuc3BsaXQoJ1xcbicpLFxuICAgICAgaHVua3MgPSB1bmlEaWZmLmh1bmtzLFxuICAgICAgY29tcGFyZUxpbmUgPSBvcHRpb25zLmNvbXBhcmVMaW5lIHx8IGZ1bmN0aW9uIChsaW5lTnVtYmVyLCBsaW5lLCBvcGVyYXRpb24sIHBhdGNoQ29udGVudCkgLyppc3RhbmJ1bCBpZ25vcmUgc3RhcnQqL3tcbiAgICByZXR1cm4gKC8qaXN0YW5idWwgaWdub3JlIGVuZCovbGluZSA9PT0gcGF0Y2hDb250ZW50XG4gICAgKTtcbiAgfSxcbiAgICAgIGVycm9yQ291bnQgPSAwLFxuICAgICAgZnV6ekZhY3RvciA9IG9wdGlvbnMuZnV6ekZhY3RvciB8fCAwLFxuICAgICAgbWluTGluZSA9IDAsXG4gICAgICBvZmZzZXQgPSAwLFxuICAgICAgcmVtb3ZlRU9GTkwgPSAvKmlzdGFuYnVsIGlnbm9yZSBzdGFydCovdm9pZCAwIC8qaXN0YW5idWwgaWdub3JlIGVuZCovLFxuICAgICAgYWRkRU9GTkwgPSAvKmlzdGFuYnVsIGlnbm9yZSBzdGFydCovdm9pZCAwIC8qaXN0YW5idWwgaWdub3JlIGVuZCovO1xuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdGhlIGh1bmsgZXhhY3RseSBmaXRzIG9uIHRoZSBwcm92aWRlZCBsb2NhdGlvblxuICAgKi9cbiAgZnVuY3Rpb24gaHVua0ZpdHMoaHVuaywgdG9Qb3MpIHtcbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IGh1bmsubGluZXMubGVuZ3RoOyBqKyspIHtcbiAgICAgIHZhciBsaW5lID0gaHVuay5saW5lc1tqXSxcbiAgICAgICAgICBvcGVyYXRpb24gPSBsaW5lWzBdLFxuICAgICAgICAgIGNvbnRlbnQgPSBsaW5lLnN1YnN0cigxKTtcblxuICAgICAgaWYgKG9wZXJhdGlvbiA9PT0gJyAnIHx8IG9wZXJhdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgIC8vIENvbnRleHQgc2FuaXR5IGNoZWNrXG4gICAgICAgIGlmICghY29tcGFyZUxpbmUodG9Qb3MgKyAxLCBsaW5lc1t0b1Bvc10sIG9wZXJhdGlvbiwgY29udGVudCkpIHtcbiAgICAgICAgICBlcnJvckNvdW50Kys7XG5cbiAgICAgICAgICBpZiAoZXJyb3JDb3VudCA+IGZ1enpGYWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdG9Qb3MrKztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIFNlYXJjaCBiZXN0IGZpdCBvZmZzZXRzIGZvciBlYWNoIGh1bmsgYmFzZWQgb24gdGhlIHByZXZpb3VzIG9uZXNcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBodW5rcy5sZW5ndGg7IGkrKykge1xuICAgIHZhciBodW5rID0gaHVua3NbaV0sXG4gICAgICAgIG1heExpbmUgPSBsaW5lcy5sZW5ndGggLSBodW5rLm9sZExpbmVzLFxuICAgICAgICBsb2NhbE9mZnNldCA9IDAsXG4gICAgICAgIHRvUG9zID0gb2Zmc2V0ICsgaHVuay5vbGRTdGFydCAtIDE7XG5cbiAgICB2YXIgaXRlcmF0b3IgPSAvKmlzdGFuYnVsIGlnbm9yZSBzdGFydCovKDAsIF9kaXN0YW5jZUl0ZXJhdG9yMi5kZWZhdWx0KSAvKmlzdGFuYnVsIGlnbm9yZSBlbmQqLyh0b1BvcywgbWluTGluZSwgbWF4TGluZSk7XG5cbiAgICBmb3IgKDsgbG9jYWxPZmZzZXQgIT09IHVuZGVmaW5lZDsgbG9jYWxPZmZzZXQgPSBpdGVyYXRvcigpKSB7XG4gICAgICBpZiAoaHVua0ZpdHMoaHVuaywgdG9Qb3MgKyBsb2NhbE9mZnNldCkpIHtcbiAgICAgICAgaHVuay5vZmZzZXQgPSBvZmZzZXQgKz0gbG9jYWxPZmZzZXQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChsb2NhbE9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gU2V0IGxvd2VyIHRleHQgbGltaXQgdG8gZW5kIG9mIHRoZSBjdXJyZW50IGh1bmssIHNvIG5leHQgb25lcyBkb24ndCB0cnlcbiAgICAvLyB0byBmaXQgb3ZlciBhbHJlYWR5IHBhdGNoZWQgdGV4dFxuICAgIG1pbkxpbmUgPSBodW5rLm9mZnNldCArIGh1bmsub2xkU3RhcnQgKyBodW5rLm9sZExpbmVzO1xuICB9XG5cbiAgLy8gQXBwbHkgcGF0Y2ggaHVua3NcbiAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGh1bmtzLmxlbmd0aDsgX2krKykge1xuICAgIHZhciBfaHVuayA9IGh1bmtzW19pXSxcbiAgICAgICAgX3RvUG9zID0gX2h1bmsub2Zmc2V0ICsgX2h1bmsubmV3U3RhcnQgLSAxO1xuICAgIGlmIChfaHVuay5uZXdMaW5lcyA9PSAwKSB7XG4gICAgICBfdG9Qb3MrKztcbiAgICB9XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9odW5rLmxpbmVzLmxlbmd0aDsgaisrKSB7XG4gICAgICB2YXIgbGluZSA9IF9odW5rLmxpbmVzW2pdLFxuICAgICAgICAgIG9wZXJhdGlvbiA9IGxpbmVbMF0sXG4gICAgICAgICAgY29udGVudCA9IGxpbmUuc3Vic3RyKDEpO1xuXG4gICAgICBpZiAob3BlcmF0aW9uID09PSAnICcpIHtcbiAgICAgICAgX3RvUG9zKys7XG4gICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJy0nKSB7XG4gICAgICAgIGxpbmVzLnNwbGljZShfdG9Qb3MsIDEpO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgfSBlbHNlIGlmIChvcGVyYXRpb24gPT09ICcrJykge1xuICAgICAgICAgIGxpbmVzLnNwbGljZShfdG9Qb3MsIDAsIGNvbnRlbnQpO1xuICAgICAgICAgIF90b1BvcysrO1xuICAgICAgICB9IGVsc2UgaWYgKG9wZXJhdGlvbiA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgdmFyIHByZXZpb3VzT3BlcmF0aW9uID0gX2h1bmsubGluZXNbaiAtIDFdID8gX2h1bmsubGluZXNbaiAtIDFdWzBdIDogbnVsbDtcbiAgICAgICAgICBpZiAocHJldmlvdXNPcGVyYXRpb24gPT09ICcrJykge1xuICAgICAgICAgICAgcmVtb3ZlRU9GTkwgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSBpZiAocHJldmlvdXNPcGVyYXRpb24gPT09ICctJykge1xuICAgICAgICAgICAgYWRkRU9GTkwgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEhhbmRsZSBFT0ZOTCBpbnNlcnRpb24vcmVtb3ZhbFxuICBpZiAocmVtb3ZlRU9GTkwpIHtcbiAgICB3aGlsZSAoIWxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdKSB7XG4gICAgICBsaW5lcy5wb3AoKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAoYWRkRU9GTkwpIHtcbiAgICBsaW5lcy5wdXNoKCcnKTtcbiAgfVxuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbi8vIFdyYXBwZXIgdGhhdCBzdXBwb3J0cyBtdWx0aXBsZSBmaWxlIHBhdGNoZXMgdmlhIGNhbGxiYWNrcy5cbmZ1bmN0aW9uIGFwcGx5UGF0Y2hlcyh1bmlEaWZmLCBvcHRpb25zKSB7XG4gIGlmICh0eXBlb2YgdW5pRGlmZiA9PT0gJ3N0cmluZycpIHtcbiAgICB1bmlEaWZmID0gLyppc3RhbmJ1bCBpZ25vcmUgc3RhcnQqLygwLCBfcGFyc2UucGFyc2VQYXRjaCkgLyppc3RhbmJ1bCBpZ25vcmUgZW5kKi8odW5pRGlmZik7XG4gIH1cblxuICB2YXIgY3VycmVudEluZGV4ID0gMDtcbiAgZnVuY3Rpb24gcHJvY2Vzc0luZGV4KCkge1xuICAgIHZhciBpbmRleCA9IHVuaURpZmZbY3VycmVudEluZGV4KytdO1xuICAgIGlmICghaW5kZXgpIHtcbiAgICAgIHJldHVybiBvcHRpb25zLmNvbXBsZXRlKCk7XG4gICAgfVxuXG4gICAgb3B0aW9ucy5sb2FkRmlsZShpbmRleCwgZnVuY3Rpb24gKGVyciwgZGF0YSkge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICByZXR1cm4gb3B0aW9ucy5jb21wbGV0ZShlcnIpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdXBkYXRlZENvbnRlbnQgPSBhcHBseVBhdGNoKGRhdGEsIGluZGV4LCBvcHRpb25zKTtcbiAgICAgIG9wdGlvbnMucGF0Y2hlZChpbmRleCwgdXBkYXRlZENvbnRlbnQpO1xuXG4gICAgICBzZXRUaW1lb3V0KHByb2Nlc3NJbmRleCwgMCk7XG4gICAgfSk7XG4gIH1cbiAgcHJvY2Vzc0luZGV4KCk7XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LGV5SjJaWEp6YVc5dUlqb3pMQ0p6YjNWeVkyVnpJanBiSWk0dUx5NHVMM055WXk5d1lYUmphQzloY0hCc2VTNXFjeUpkTENKdVlXMWxjeUk2VzEwc0ltMWhjSEJwYm1keklqb2lPenM3WjBOQlIyZENPM2xFUVhOSVFUczdRVUY2U0doQ096dEJRVU5CT3pzN096czdPM1ZDUVVWUExGTkJRVk1zVlVGQlZDeERRVUZ2UWl4TlFVRndRaXhGUVVFMFFpeFBRVUUxUWl4RlFVRnRSRHR6UkVGQlpDeG5SVUZCVlN4clFrRkJTVHM3UVVGRGVFUXNUVUZCU1N4UFFVRlBMRTlCUVZBc1MwRkJiVUlzVVVGQmJrSXNSVUZCTmtJN1FVRkRMMElzWTBGQlZTeDNSVUZCVnl4UFFVRllMRU5CUVZZc1EwRkVLMEk3UjBGQmFrTTdPMEZCU1VFc1RVRkJTU3hOUVVGTkxFOUJRVTRzUTBGQll5eFBRVUZrTEVOQlFVb3NSVUZCTkVJN1FVRkRNVUlzVVVGQlNTeFJRVUZSTEUxQlFWSXNSMEZCYVVJc1EwRkJha0lzUlVGQmIwSTdRVUZEZEVJc1dVRkJUU3hKUVVGSkxFdEJRVW9zUTBGQlZTdzBRMEZCVml4RFFVRk9MRU5CUkhOQ08wdEJRWGhDT3p0QlFVbEJMR05CUVZVc1VVRkJVU3hEUVVGU0xFTkJRVllzUTBGTU1FSTdSMEZCTlVJN096dEJRVXgzUkN4TlFXTndSQ3hSUVVGUkxFOUJRVThzUzBGQlVDeERRVUZoTEVsQlFXSXNRMEZCVWp0TlFVTkJMRkZCUVZFc1VVRkJVU3hMUVVGU08wMUJSVklzWTBGQll5eFJRVUZSTEZkQlFWSXNTVUZCZDBJc1ZVRkJReXhWUVVGRUxFVkJRV0VzU1VGQllpeEZRVUZ0UWl4VFFVRnVRaXhGUVVFNFFpeFpRVUU1UWp0dFEwRkJLME1zVTBGQlV5eFpRVUZVT3p0SFFVRXZRenROUVVOMFF5eGhRVUZoTEVOQlFXSTdUVUZEUVN4aFFVRmhMRkZCUVZFc1ZVRkJVaXhKUVVGelFpeERRVUYwUWp0TlFVTmlMRlZCUVZVc1EwRkJWanROUVVOQkxGTkJRVk1zUTBGQlZEdE5RVVZCTEhGRlFWUktPMDFCVlVrc2EwVkJWa283T3pzN08wRkJaSGRFTEZkQk5rSXZReXhSUVVGVUxFTkJRV3RDTEVsQlFXeENMRVZCUVhkQ0xFdEJRWGhDTEVWQlFTdENPMEZCUXpkQ0xGTkJRVXNzU1VGQlNTeEpRVUZKTEVOQlFVb3NSVUZCVHl4SlFVRkpMRXRCUVVzc1MwRkJUQ3hEUVVGWExFMUJRVmdzUlVGQmJVSXNSMEZCZGtNc1JVRkJORU03UVVGRE1VTXNWVUZCU1N4UFFVRlBMRXRCUVVzc1MwRkJUQ3hEUVVGWExFTkJRVmdzUTBGQlVEdFZRVU5CTEZsQlFWa3NTMEZCU3l4RFFVRk1MRU5CUVZvN1ZVRkRRU3hWUVVGVkxFdEJRVXNzVFVGQlRDeERRVUZaTEVOQlFWb3NRMEZCVml4RFFVaHpRenM3UVVGTE1VTXNWVUZCU1N4alFVRmpMRWRCUVdRc1NVRkJjVUlzWTBGQll5eEhRVUZrTEVWQlFXMUNPenRCUVVVeFF5eFpRVUZKTEVOQlFVTXNXVUZCV1N4UlFVRlJMRU5CUVZJc1JVRkJWeXhOUVVGTkxFdEJRVTRzUTBGQmRrSXNSVUZCY1VNc1UwRkJja01zUlVGQlowUXNUMEZCYUVRc1EwRkJSQ3hGUVVFeVJEdEJRVU0zUkN4MVFrRkVOa1E3TzBGQlJ6ZEVMR05CUVVrc1lVRkJZU3hWUVVGaUxFVkJRWGxDTzBGQlF6TkNMRzFDUVVGUExFdEJRVkFzUTBGRU1rSTdWMEZCTjBJN1UwRklSanRCUVU5QkxHZENRVlF3UXp0UFFVRTFRenRMUVV4R096dEJRV3RDUVN4WFFVRlBMRWxCUVZBc1EwRnVRalpDTzBkQlFTOUNPenM3UVVFM1FuZEVMRTlCYjBSdVJDeEpRVUZKTEVsQlFVa3NRMEZCU2l4RlFVRlBMRWxCUVVrc1RVRkJUU3hOUVVGT0xFVkJRV01zUjBGQmJFTXNSVUZCZFVNN1FVRkRja01zVVVGQlNTeFBRVUZQTEUxQlFVMHNRMEZCVGl4RFFVRlFPMUZCUTBFc1ZVRkJWU3hOUVVGTkxFMUJRVTRzUjBGQlpTeExRVUZMTEZGQlFVdzdVVUZEZWtJc1kwRkJZeXhEUVVGa08xRkJRMEVzVVVGQlVTeFRRVUZUTEV0QlFVc3NVVUZCVEN4SFFVRm5RaXhEUVVGNlFpeERRVXA1UWpzN1FVRk5ja01zVVVGQlNTeFhRVUZYTEdsR1FVRnBRaXhMUVVGcVFpeEZRVUYzUWl4UFFVRjRRaXhGUVVGcFF5eFBRVUZxUXl4RFFVRllMRU5CVG1sRE96dEJRVkZ5UXl4WFFVRlBMR2RDUVVGblFpeFRRVUZvUWl4RlFVRXlRaXhqUVVGakxGVkJRV1FzUlVGQk1FSTdRVUZETVVRc1ZVRkJTU3hUUVVGVExFbEJRVlFzUlVGQlpTeFJRVUZSTEZkQlFWSXNRMEZCYmtJc1JVRkJlVU03UVVGRGRrTXNZVUZCU3l4TlFVRk1MRWRCUVdNc1ZVRkJWU3hYUVVGV0xFTkJSSGxDTzBGQlJYWkRMR05CUm5WRE8wOUJRWHBETzB0QlJFWTdPMEZCVDBFc1VVRkJTU3huUWtGQlowSXNVMEZCYUVJc1JVRkJNa0k3UVVGRE4wSXNZVUZCVHl4TFFVRlFMRU5CUkRaQ08wdEJRUzlDT3pzN08wRkJabkZETEZkQmNVSnlReXhIUVVGVkxFdEJRVXNzVFVGQlRDeEhRVUZqTEV0QlFVc3NVVUZCVEN4SFFVRm5RaXhMUVVGTExGRkJRVXdzUTBGeVFrZzdSMEZCZGtNN096dEJRWEJFZDBRc1QwRTJSVzVFTEVsQlFVa3NTMEZCU1N4RFFVRktMRVZCUVU4c1MwRkJTU3hOUVVGTkxFMUJRVTRzUlVGQll5eEpRVUZzUXl4RlFVRjFRenRCUVVOeVF5eFJRVUZKTEZGQlFVOHNUVUZCVFN4RlFVRk9MRU5CUVZBN1VVRkRRU3hUUVVGUkxFMUJRVXNzVFVGQlRDeEhRVUZqTEUxQlFVc3NVVUZCVEN4SFFVRm5RaXhEUVVFNVFpeERRVVo1UWp0QlFVZHlReXhSUVVGSkxFMUJRVXNzVVVGQlRDeEpRVUZwUWl4RFFVRnFRaXhGUVVGdlFqdEJRVUZGTEdWQlFVWTdTMEZCZUVJN08wRkJSVUVzVTBGQlN5eEpRVUZKTEVsQlFVa3NRMEZCU2l4RlFVRlBMRWxCUVVrc1RVRkJTeXhMUVVGTUxFTkJRVmNzVFVGQldDeEZRVUZ0UWl4SFFVRjJReXhGUVVFMFF6dEJRVU14UXl4VlFVRkpMRTlCUVU4c1RVRkJTeXhMUVVGTUxFTkJRVmNzUTBGQldDeERRVUZRTzFWQlEwRXNXVUZCV1N4TFFVRkxMRU5CUVV3c1EwRkJXanRWUVVOQkxGVkJRVlVzUzBGQlN5eE5RVUZNTEVOQlFWa3NRMEZCV2l4RFFVRldMRU5CU0hORE96dEJRVXN4UXl4VlFVRkpMR05CUVdNc1IwRkJaQ3hGUVVGdFFqdEJRVU55UWl4cFFrRkVjVUk3VDBGQmRrSXNUVUZGVHl4SlFVRkpMR05CUVdNc1IwRkJaQ3hGUVVGdFFqdEJRVU0xUWl4alFVRk5MRTFCUVU0c1EwRkJZU3hOUVVGaUxFVkJRVzlDTEVOQlFYQkNPenRCUVVRMFFpeFBRVUYyUWl4TlFVZEJMRWxCUVVrc1kwRkJZeXhIUVVGa0xFVkJRVzFDTzBGQlF6VkNMR2RDUVVGTkxFMUJRVTRzUTBGQllTeE5RVUZpTEVWQlFXOUNMRU5CUVhCQ0xFVkJRWFZDTEU5QlFYWkNMRVZCUkRSQ08wRkJSVFZDTEcxQ1FVWTBRanRUUVVGMlFpeE5RVWRCTEVsQlFVa3NZMEZCWXl4SlFVRmtMRVZCUVc5Q08wRkJRemRDTEdOQlFVa3NiMEpCUVc5Q0xFMUJRVXNzUzBGQlRDeERRVUZYTEVsQlFVa3NRMEZCU2l4RFFVRllMRWRCUVc5Q0xFMUJRVXNzUzBGQlRDeERRVUZYTEVsQlFVa3NRMEZCU2l4RFFVRllMRU5CUVd0Q0xFTkJRV3hDTEVOQlFYQkNMRWRCUVRKRExFbEJRVE5ETEVOQlJFczdRVUZGTjBJc1kwRkJTU3h6UWtGQmMwSXNSMEZCZEVJc1JVRkJNa0k3UVVGRE4wSXNNRUpCUVdNc1NVRkJaQ3hEUVVRMlFqdFhRVUV2UWl4TlFVVlBMRWxCUVVrc2MwSkJRWE5DTEVkQlFYUkNMRVZCUVRKQ08wRkJRM0JETEhWQ1FVRlhMRWxCUVZnc1EwRkViME03VjBGQkwwSTdVMEZLUmp0TFFXSlVPMGRCVEVZN096dEJRVGRGZDBRc1RVRXlSM0JFTEZkQlFVb3NSVUZCYVVJN1FVRkRaaXhYUVVGUExFTkJRVU1zVFVGQlRTeE5RVUZOTEUxQlFVNHNSMEZCWlN4RFFVRm1MRU5CUVZBc1JVRkJNRUk3UVVGREwwSXNXVUZCVFN4SFFVRk9MRWRCUkN0Q08wdEJRV3BETzBkQlJFWXNUVUZKVHl4SlFVRkpMRkZCUVVvc1JVRkJZenRCUVVOdVFpeFZRVUZOTEVsQlFVNHNRMEZCVnl4RlFVRllMRVZCUkcxQ08wZEJRV1E3UVVGSFVDeFRRVUZQTEUxQlFVMHNTVUZCVGl4RFFVRlhMRWxCUVZnc1EwRkJVQ3hEUVd4SWQwUTdRMEZCYmtRN096dEJRWE5JUVN4VFFVRlRMRmxCUVZRc1EwRkJjMElzVDBGQmRFSXNSVUZCSzBJc1QwRkJMMElzUlVGQmQwTTdRVUZETjBNc1RVRkJTU3hQUVVGUExFOUJRVkFzUzBGQmJVSXNVVUZCYmtJc1JVRkJOa0k3UVVGREwwSXNZMEZCVlN4M1JVRkJWeXhQUVVGWUxFTkJRVllzUTBGRUswSTdSMEZCYWtNN08wRkJTVUVzVFVGQlNTeGxRVUZsTEVOQlFXWXNRMEZNZVVNN1FVRk5OME1zVjBGQlV5eFpRVUZVTEVkQlFYZENPMEZCUTNSQ0xGRkJRVWtzVVVGQlVTeFJRVUZSTEdOQlFWSXNRMEZCVWl4RFFVUnJRanRCUVVWMFFpeFJRVUZKTEVOQlFVTXNTMEZCUkN4RlFVRlJPMEZCUTFZc1lVRkJUeXhSUVVGUkxGRkJRVklzUlVGQlVDeERRVVJWTzB0QlFWbzdPMEZCU1VFc1dVRkJVU3hSUVVGU0xFTkJRV2xDTEV0QlFXcENMRVZCUVhkQ0xGVkJRVk1zUjBGQlZDeEZRVUZqTEVsQlFXUXNSVUZCYjBJN1FVRkRNVU1zVlVGQlNTeEhRVUZLTEVWQlFWTTdRVUZEVUN4bFFVRlBMRkZCUVZFc1VVRkJVaXhEUVVGcFFpeEhRVUZxUWl4RFFVRlFMRU5CUkU4N1QwRkJWRHM3UVVGSlFTeFZRVUZKTEdsQ1FVRnBRaXhYUVVGWExFbEJRVmdzUlVGQmFVSXNTMEZCYWtJc1JVRkJkMElzVDBGQmVFSXNRMEZCYWtJc1EwRk1jME03UVVGTk1VTXNZMEZCVVN4UFFVRlNMRU5CUVdkQ0xFdEJRV2hDTEVWQlFYVkNMR05CUVhaQ0xFVkJUakJET3p0QlFWRXhReXhwUWtGQlZ5eFpRVUZZTEVWQlFYbENMRU5CUVhwQ0xFVkJVakJETzB0QlFYQkNMRU5CUVhoQ0xFTkJUbk5DTzBkQlFYaENPMEZCYVVKQkxHbENRWFpDTmtNN1EwRkJlRU1pTENKbWFXeGxJam9pWVhCd2JIa3Vhbk1pTENKemIzVnlZMlZ6UTI5dWRHVnVkQ0k2V3lKcGJYQnZjblFnZTNCaGNuTmxVR0YwWTJoOUlHWnliMjBnSnk0dmNHRnljMlVuTzF4dWFXMXdiM0owSUdScGMzUmhibU5sU1hSbGNtRjBiM0lnWm5KdmJTQW5MaTR2ZFhScGJDOWthWE4wWVc1alpTMXBkR1Z5WVhSdmNpYzdYRzVjYm1WNGNHOXlkQ0JtZFc1amRHbHZiaUJoY0hCc2VWQmhkR05vS0hOdmRYSmpaU3dnZFc1cFJHbG1aaXdnYjNCMGFXOXVjeUE5SUh0OUtTQjdYRzRnSUdsbUlDaDBlWEJsYjJZZ2RXNXBSR2xtWmlBOVBUMGdKM04wY21sdVp5Y3BJSHRjYmlBZ0lDQjFibWxFYVdabUlEMGdjR0Z5YzJWUVlYUmphQ2gxYm1sRWFXWm1LVHRjYmlBZ2ZWeHVYRzRnSUdsbUlDaEJjbkpoZVM1cGMwRnljbUY1S0hWdWFVUnBabVlwS1NCN1hHNGdJQ0FnYVdZZ0tIVnVhVVJwWm1ZdWJHVnVaM1JvSUQ0Z01Ta2dlMXh1SUNBZ0lDQWdkR2h5YjNjZ2JtVjNJRVZ5Y205eUtDZGhjSEJzZVZCaGRHTm9JRzl1YkhrZ2QyOXlhM01nZDJsMGFDQmhJSE5wYm1kc1pTQnBibkIxZEM0bktUdGNiaUFnSUNCOVhHNWNiaUFnSUNCMWJtbEVhV1ptSUQwZ2RXNXBSR2xtWmxzd1hUdGNiaUFnZlZ4dVhHNGdJQzh2SUVGd2NHeDVJSFJvWlNCa2FXWm1JSFJ2SUhSb1pTQnBibkIxZEZ4dUlDQnNaWFFnYkdsdVpYTWdQU0J6YjNWeVkyVXVjM0JzYVhRb0oxeGNiaWNwTEZ4dUlDQWdJQ0FnYUhWdWEzTWdQU0IxYm1sRWFXWm1MbWgxYm10ekxGeHVYRzRnSUNBZ0lDQmpiMjF3WVhKbFRHbHVaU0E5SUc5d2RHbHZibk11WTI5dGNHRnlaVXhwYm1VZ2ZId2dLQ2hzYVc1bFRuVnRZbVZ5TENCc2FXNWxMQ0J2Y0dWeVlYUnBiMjRzSUhCaGRHTm9RMjl1ZEdWdWRDa2dQVDRnYkdsdVpTQTlQVDBnY0dGMFkyaERiMjUwWlc1MEtTeGNiaUFnSUNBZ0lHVnljbTl5UTI5MWJuUWdQU0F3TEZ4dUlDQWdJQ0FnWm5WNmVrWmhZM1J2Y2lBOUlHOXdkR2x2Ym5NdVpuVjZla1poWTNSdmNpQjhmQ0F3TEZ4dUlDQWdJQ0FnYldsdVRHbHVaU0E5SURBc1hHNGdJQ0FnSUNCdlptWnpaWFFnUFNBd0xGeHVYRzRnSUNBZ0lDQnlaVzF2ZG1WRlQwWk9UQ3hjYmlBZ0lDQWdJR0ZrWkVWUFJrNU1PMXh1WEc0Z0lDOHFLbHh1SUNBZ0tpQkRhR1ZqYTNNZ2FXWWdkR2hsSUdoMWJtc2daWGhoWTNSc2VTQm1hWFJ6SUc5dUlIUm9aU0J3Y205MmFXUmxaQ0JzYjJOaGRHbHZibHh1SUNBZ0tpOWNiaUFnWm5WdVkzUnBiMjRnYUhWdWEwWnBkSE1vYUhWdWF5d2dkRzlRYjNNcElIdGNiaUFnSUNCbWIzSWdLR3hsZENCcUlEMGdNRHNnYWlBOElHaDFibXN1YkdsdVpYTXViR1Z1WjNSb095QnFLeXNwSUh0Y2JpQWdJQ0FnSUd4bGRDQnNhVzVsSUQwZ2FIVnVheTVzYVc1bGMxdHFYU3hjYmlBZ0lDQWdJQ0FnSUNCdmNHVnlZWFJwYjI0Z1BTQnNhVzVsV3pCZExGeHVJQ0FnSUNBZ0lDQWdJR052Ym5SbGJuUWdQU0JzYVc1bExuTjFZbk4wY2lneEtUdGNibHh1SUNBZ0lDQWdhV1lnS0c5d1pYSmhkR2x2YmlBOVBUMGdKeUFuSUh4OElHOXdaWEpoZEdsdmJpQTlQVDBnSnkwbktTQjdYRzRnSUNBZ0lDQWdJQzh2SUVOdmJuUmxlSFFnYzJGdWFYUjVJR05vWldOclhHNGdJQ0FnSUNBZ0lHbG1JQ2doWTI5dGNHRnlaVXhwYm1Vb2RHOVFiM01nS3lBeExDQnNhVzVsYzF0MGIxQnZjMTBzSUc5d1pYSmhkR2x2Yml3Z1kyOXVkR1Z1ZENrcElIdGNiaUFnSUNBZ0lDQWdJQ0JsY25KdmNrTnZkVzUwS3lzN1hHNWNiaUFnSUNBZ0lDQWdJQ0JwWmlBb1pYSnliM0pEYjNWdWRDQStJR1oxZW5wR1lXTjBiM0lwSUh0Y2JpQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQm1ZV3h6WlR0Y2JpQWdJQ0FnSUNBZ0lDQjlYRzRnSUNBZ0lDQWdJSDFjYmlBZ0lDQWdJQ0FnZEc5UWIzTXJLenRjYmlBZ0lDQWdJSDFjYmlBZ0lDQjlYRzVjYmlBZ0lDQnlaWFIxY200Z2RISjFaVHRjYmlBZ2ZWeHVYRzRnSUM4dklGTmxZWEpqYUNCaVpYTjBJR1pwZENCdlptWnpaWFJ6SUdadmNpQmxZV05vSUdoMWJtc2dZbUZ6WldRZ2IyNGdkR2hsSUhCeVpYWnBiM1Z6SUc5dVpYTmNiaUFnWm05eUlDaHNaWFFnYVNBOUlEQTdJR2tnUENCb2RXNXJjeTVzWlc1bmRHZzdJR2tyS3lrZ2UxeHVJQ0FnSUd4bGRDQm9kVzVySUQwZ2FIVnVhM05iYVYwc1hHNGdJQ0FnSUNBZ0lHMWhlRXhwYm1VZ1BTQnNhVzVsY3k1c1pXNW5kR2dnTFNCb2RXNXJMbTlzWkV4cGJtVnpMRnh1SUNBZ0lDQWdJQ0JzYjJOaGJFOW1abk5sZENBOUlEQXNYRzRnSUNBZ0lDQWdJSFJ2VUc5eklEMGdiMlptYzJWMElDc2dhSFZ1YXk1dmJHUlRkR0Z5ZENBdElERTdYRzVjYmlBZ0lDQnNaWFFnYVhSbGNtRjBiM0lnUFNCa2FYTjBZVzVqWlVsMFpYSmhkRzl5S0hSdlVHOXpMQ0J0YVc1TWFXNWxMQ0J0WVhoTWFXNWxLVHRjYmx4dUlDQWdJR1p2Y2lBb095QnNiMk5oYkU5bVpuTmxkQ0FoUFQwZ2RXNWtaV1pwYm1Wa095QnNiMk5oYkU5bVpuTmxkQ0E5SUdsMFpYSmhkRzl5S0NrcElIdGNiaUFnSUNBZ0lHbG1JQ2hvZFc1clJtbDBjeWhvZFc1ckxDQjBiMUJ2Y3lBcklHeHZZMkZzVDJabWMyVjBLU2tnZTF4dUlDQWdJQ0FnSUNCb2RXNXJMbTltWm5ObGRDQTlJRzltWm5ObGRDQXJQU0JzYjJOaGJFOW1abk5sZER0Y2JpQWdJQ0FnSUNBZ1luSmxZV3M3WEc0Z0lDQWdJQ0I5WEc0Z0lDQWdmVnh1WEc0Z0lDQWdhV1lnS0d4dlkyRnNUMlptYzJWMElEMDlQU0IxYm1SbFptbHVaV1FwSUh0Y2JpQWdJQ0FnSUhKbGRIVnliaUJtWVd4elpUdGNiaUFnSUNCOVhHNWNiaUFnSUNBdkx5QlRaWFFnYkc5M1pYSWdkR1Y0ZENCc2FXMXBkQ0IwYnlCbGJtUWdiMllnZEdobElHTjFjbkpsYm5RZ2FIVnVheXdnYzI4Z2JtVjRkQ0J2Ym1WeklHUnZiaWQwSUhSeWVWeHVJQ0FnSUM4dklIUnZJR1pwZENCdmRtVnlJR0ZzY21WaFpIa2djR0YwWTJobFpDQjBaWGgwWEc0Z0lDQWdiV2x1VEdsdVpTQTlJR2gxYm1zdWIyWm1jMlYwSUNzZ2FIVnVheTV2YkdSVGRHRnlkQ0FySUdoMWJtc3ViMnhrVEdsdVpYTTdYRzRnSUgxY2JseHVJQ0F2THlCQmNIQnNlU0J3WVhSamFDQm9kVzVyYzF4dUlDQm1iM0lnS0d4bGRDQnBJRDBnTURzZ2FTQThJR2gxYm10ekxteGxibWQwYURzZ2FTc3JLU0I3WEc0Z0lDQWdiR1YwSUdoMWJtc2dQU0JvZFc1cmMxdHBYU3hjYmlBZ0lDQWdJQ0FnZEc5UWIzTWdQU0JvZFc1ckxtOW1abk5sZENBcklHaDFibXN1Ym1WM1UzUmhjblFnTFNBeE8xeHVJQ0FnSUdsbUlDaG9kVzVyTG01bGQweHBibVZ6SUQwOUlEQXBJSHNnZEc5UWIzTXJLenNnZlZ4dVhHNGdJQ0FnWm05eUlDaHNaWFFnYWlBOUlEQTdJR29nUENCb2RXNXJMbXhwYm1WekxteGxibWQwYURzZ2Fpc3JLU0I3WEc0Z0lDQWdJQ0JzWlhRZ2JHbHVaU0E5SUdoMWJtc3ViR2x1WlhOYmFsMHNYRzRnSUNBZ0lDQWdJQ0FnYjNCbGNtRjBhVzl1SUQwZ2JHbHVaVnN3WFN4Y2JpQWdJQ0FnSUNBZ0lDQmpiMjUwWlc1MElEMGdiR2x1WlM1emRXSnpkSElvTVNrN1hHNWNiaUFnSUNBZ0lHbG1JQ2h2Y0dWeVlYUnBiMjRnUFQwOUlDY2dKeWtnZTF4dUlDQWdJQ0FnSUNCMGIxQnZjeXNyTzF4dUlDQWdJQ0FnZlNCbGJITmxJR2xtSUNodmNHVnlZWFJwYjI0Z1BUMDlJQ2N0SnlrZ2UxeHVJQ0FnSUNBZ0lDQnNhVzVsY3k1emNHeHBZMlVvZEc5UWIzTXNJREVwTzF4dUlDQWdJQ0FnTHlvZ2FYTjBZVzVpZFd3Z2FXZHViM0psSUdWc2MyVWdLaTljYmlBZ0lDQWdJSDBnWld4elpTQnBaaUFvYjNCbGNtRjBhVzl1SUQwOVBTQW5LeWNwSUh0Y2JpQWdJQ0FnSUNBZ2JHbHVaWE11YzNCc2FXTmxLSFJ2VUc5ekxDQXdMQ0JqYjI1MFpXNTBLVHRjYmlBZ0lDQWdJQ0FnZEc5UWIzTXJLenRjYmlBZ0lDQWdJSDBnWld4elpTQnBaaUFvYjNCbGNtRjBhVzl1SUQwOVBTQW5YRnhjWENjcElIdGNiaUFnSUNBZ0lDQWdiR1YwSUhCeVpYWnBiM1Z6VDNCbGNtRjBhVzl1SUQwZ2FIVnVheTVzYVc1bGMxdHFJQzBnTVYwZ1B5Qm9kVzVyTG14cGJtVnpXMm9nTFNBeFhWc3dYU0E2SUc1MWJHdzdYRzRnSUNBZ0lDQWdJR2xtSUNod2NtVjJhVzkxYzA5d1pYSmhkR2x2YmlBOVBUMGdKeXNuS1NCN1hHNGdJQ0FnSUNBZ0lDQWdjbVZ0YjNabFJVOUdUa3dnUFNCMGNuVmxPMXh1SUNBZ0lDQWdJQ0I5SUdWc2MyVWdhV1lnS0hCeVpYWnBiM1Z6VDNCbGNtRjBhVzl1SUQwOVBTQW5MU2NwSUh0Y2JpQWdJQ0FnSUNBZ0lDQmhaR1JGVDBaT1RDQTlJSFJ5ZFdVN1hHNGdJQ0FnSUNBZ0lIMWNiaUFnSUNBZ0lIMWNiaUFnSUNCOVhHNGdJSDFjYmx4dUlDQXZMeUJJWVc1a2JHVWdSVTlHVGt3Z2FXNXpaWEowYVc5dUwzSmxiVzkyWVd4Y2JpQWdhV1lnS0hKbGJXOTJaVVZQUms1TUtTQjdYRzRnSUNBZ2QyaHBiR1VnS0NGc2FXNWxjMXRzYVc1bGN5NXNaVzVuZEdnZ0xTQXhYU2tnZTF4dUlDQWdJQ0FnYkdsdVpYTXVjRzl3S0NrN1hHNGdJQ0FnZlZ4dUlDQjlJR1ZzYzJVZ2FXWWdLR0ZrWkVWUFJrNU1LU0I3WEc0Z0lDQWdiR2x1WlhNdWNIVnphQ2duSnlrN1hHNGdJSDFjYmlBZ2NtVjBkWEp1SUd4cGJtVnpMbXB2YVc0b0oxeGNiaWNwTzF4dWZWeHVYRzR2THlCWGNtRndjR1Z5SUhSb1lYUWdjM1Z3Y0c5eWRITWdiWFZzZEdsd2JHVWdabWxzWlNCd1lYUmphR1Z6SUhacFlTQmpZV3hzWW1GamEzTXVYRzVsZUhCdmNuUWdablZ1WTNScGIyNGdZWEJ3YkhsUVlYUmphR1Z6S0hWdWFVUnBabVlzSUc5d2RHbHZibk1wSUh0Y2JpQWdhV1lnS0hSNWNHVnZaaUIxYm1sRWFXWm1JRDA5UFNBbmMzUnlhVzVuSnlrZ2UxeHVJQ0FnSUhWdWFVUnBabVlnUFNCd1lYSnpaVkJoZEdOb0tIVnVhVVJwWm1ZcE8xeHVJQ0I5WEc1Y2JpQWdiR1YwSUdOMWNuSmxiblJKYm1SbGVDQTlJREE3WEc0Z0lHWjFibU4wYVc5dUlIQnliMk5sYzNOSmJtUmxlQ2dwSUh0Y2JpQWdJQ0JzWlhRZ2FXNWtaWGdnUFNCMWJtbEVhV1ptVzJOMWNuSmxiblJKYm1SbGVDc3JYVHRjYmlBZ0lDQnBaaUFvSVdsdVpHVjRLU0I3WEc0Z0lDQWdJQ0J5WlhSMWNtNGdiM0IwYVc5dWN5NWpiMjF3YkdWMFpTZ3BPMXh1SUNBZ0lIMWNibHh1SUNBZ0lHOXdkR2x2Ym5NdWJHOWhaRVpwYkdVb2FXNWtaWGdzSUdaMWJtTjBhVzl1S0dWeWNpd2daR0YwWVNrZ2UxeHVJQ0FnSUNBZ2FXWWdLR1Z5Y2lrZ2UxeHVJQ0FnSUNBZ0lDQnlaWFIxY200Z2IzQjBhVzl1Y3k1amIyMXdiR1YwWlNobGNuSXBPMXh1SUNBZ0lDQWdmVnh1WEc0Z0lDQWdJQ0JzWlhRZ2RYQmtZWFJsWkVOdmJuUmxiblFnUFNCaGNIQnNlVkJoZEdOb0tHUmhkR0VzSUdsdVpHVjRMQ0J2Y0hScGIyNXpLVHRjYmlBZ0lDQWdJRzl3ZEdsdmJuTXVjR0YwWTJobFpDaHBibVJsZUN3Z2RYQmtZWFJsWkVOdmJuUmxiblFwTzF4dVhHNGdJQ0FnSUNCelpYUlVhVzFsYjNWMEtIQnliMk5sYzNOSmJtUmxlQ3dnTUNrN1hHNGdJQ0FnZlNrN1hHNGdJSDFjYmlBZ2NISnZZMlZ6YzBsdVpHVjRLQ2s3WEc1OVhHNGlYWDA9XG4iXX0=