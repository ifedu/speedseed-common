'use strict';
var gitHosts = require('./git-host-info.js');
var extend = Object.assign || require('util')._extend;
var GitHost = module.exports = function (type, user, auth, project, committish, defaultRepresentation, opts) {
    var gitHostInfo = this;
    gitHostInfo.type = type;
    Object.keys(gitHosts[type]).forEach(function (key) {
        gitHostInfo[key] = gitHosts[type][key];
    });
    gitHostInfo.user = user;
    gitHostInfo.auth = auth;
    gitHostInfo.project = project;
    gitHostInfo.committish = committish;
    gitHostInfo.default = defaultRepresentation;
    gitHostInfo.opts = opts || {};
};
GitHost.prototype = {};
GitHost.prototype.hash = function () {
    return this.committish ? '#' + this.committish : '';
};
GitHost.prototype._fill = function (template, opts) {
    if (!template)
        return;
    var vars = extend({}, opts);
    opts = extend(extend({}, this.opts), opts);
    var self = this;
    Object.keys(this).forEach(function (key) {
        if (self[key] != null && vars[key] == null)
            vars[key] = self[key];
    });
    var rawAuth = vars.auth;
    var rawComittish = vars.committish;
    Object.keys(vars).forEach(function (key) {
        vars[key] = encodeURIComponent(vars[key]);
    });
    vars['auth@'] = rawAuth ? rawAuth + '@' : '';
    if (opts.noCommittish) {
        vars['#committish'] = '';
        vars['/tree/committish'] = '';
        vars['/comittish'] = '';
        vars.comittish = '';
    }
    else {
        vars['#committish'] = rawComittish ? '#' + rawComittish : '';
        vars['/tree/committish'] = vars.committish
            ? '/' + vars.treepath + '/' + vars.committish
            : '';
        vars['/committish'] = vars.committish ? '/' + vars.committish : '';
        vars.committish = vars.committish || 'master';
    }
    var res = template;
    Object.keys(vars).forEach(function (key) {
        res = res.replace(new RegExp('[{]' + key + '[}]', 'g'), vars[key]);
    });
    if (opts.noGitPlus) {
        return res.replace(/^git[+]/, '');
    }
    else {
        return res;
    }
};
GitHost.prototype.ssh = function (opts) {
    return this._fill(this.sshtemplate, opts);
};
GitHost.prototype.sshurl = function (opts) {
    return this._fill(this.sshurltemplate, opts);
};
GitHost.prototype.browse = function (opts) {
    return this._fill(this.browsetemplate, opts);
};
GitHost.prototype.docs = function (opts) {
    return this._fill(this.docstemplate, opts);
};
GitHost.prototype.bugs = function (opts) {
    return this._fill(this.bugstemplate, opts);
};
GitHost.prototype.https = function (opts) {
    return this._fill(this.httpstemplate, opts);
};
GitHost.prototype.git = function (opts) {
    return this._fill(this.gittemplate, opts);
};
GitHost.prototype.shortcut = function (opts) {
    return this._fill(this.shortcuttemplate, opts);
};
GitHost.prototype.path = function (opts) {
    return this._fill(this.pathtemplate, opts);
};
GitHost.prototype.tarball = function (opts) {
    return this._fill(this.tarballtemplate, opts);
};
GitHost.prototype.file = function (P, opts) {
    return this._fill(this.filetemplate, extend({
        path: P.replace(/^[/]+/g, '')
    }, opts));
};
GitHost.prototype.getDefaultRepresentation = function () {
    return this.default;
};
GitHost.prototype.toString = function (opts) {
    return (this[this.default] || this.sshurl).call(this, opts);
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxob3N0ZWQtZ2l0LWluZm9cXGdpdC1ob3N0LmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGlmZWR1XFxBcHBEYXRhXFxSb2FtaW5nXFxudm1cXHY4LjQuMFxcbm9kZV9tb2R1bGVzXFxnZW5lcmF0b3Itc3BlZWRzZWVkXFxub2RlX21vZHVsZXNcXGhvc3RlZC1naXQtaW5mb1xcZ2l0LWhvc3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFBO0FBQ1osSUFBSSxRQUFRLEdBQUcsT0FBTyxDQUFDLG9CQUFvQixDQUFDLENBQUE7QUFDNUMsSUFBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFBO0FBRXJELElBQUksT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUUsVUFBVSxFQUFFLHFCQUFxQixFQUFFLElBQUk7SUFDekcsSUFBSSxXQUFXLEdBQUcsSUFBSSxDQUFBO0lBQ3RCLFdBQVcsQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFBO0lBQ3ZCLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRztRQUMvQyxXQUFXLENBQUMsR0FBRyxDQUFDLEdBQUcsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ3hDLENBQUMsQ0FBQyxDQUFBO0lBQ0YsV0FBVyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7SUFDdkIsV0FBVyxDQUFDLElBQUksR0FBRyxJQUFJLENBQUE7SUFDdkIsV0FBVyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUE7SUFDN0IsV0FBVyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUE7SUFDbkMsV0FBVyxDQUFDLE9BQU8sR0FBRyxxQkFBcUIsQ0FBQTtJQUMzQyxXQUFXLENBQUMsSUFBSSxHQUFHLElBQUksSUFBSSxFQUFFLENBQUE7QUFDL0IsQ0FBQyxDQUFBO0FBQ0QsT0FBTyxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUE7QUFFdEIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUc7SUFDdkIsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxVQUFVLEdBQUcsRUFBRSxDQUFBO0FBQ3JELENBQUMsQ0FBQTtBQUVELE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxHQUFHLFVBQVUsUUFBUSxFQUFFLElBQUk7SUFDaEQsRUFBRSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7UUFBQyxNQUFNLENBQUE7SUFDckIsSUFBSSxJQUFJLEdBQUcsTUFBTSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMsQ0FBQTtJQUMzQixJQUFJLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLElBQUksQ0FBQyxDQUFBO0lBQzFDLElBQUksSUFBSSxHQUFHLElBQUksQ0FBQTtJQUNmLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRztRQUNyQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxJQUFJLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUM7WUFBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFBO0lBQ25FLENBQUMsQ0FBQyxDQUFBO0lBQ0YsSUFBSSxPQUFPLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQTtJQUN2QixJQUFJLFlBQVksR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFBO0lBQ2xDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRztRQUNyQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsa0JBQWtCLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUE7SUFDM0MsQ0FBQyxDQUFDLENBQUE7SUFDRixJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsT0FBTyxHQUFHLE9BQU8sR0FBRyxHQUFHLEdBQUcsRUFBRSxDQUFBO0lBQzVDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDeEIsSUFBSSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFBO1FBQzdCLElBQUksQ0FBQyxZQUFZLENBQUMsR0FBRyxFQUFFLENBQUE7UUFDdkIsSUFBSSxDQUFDLFNBQVMsR0FBRyxFQUFFLENBQUE7SUFDckIsQ0FBQztJQUFDLElBQUksQ0FBQyxDQUFDO1FBQ04sSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLFlBQVksR0FBRyxHQUFHLEdBQUcsWUFBWSxHQUFHLEVBQUUsQ0FBQTtRQUM1RCxJQUFJLENBQUMsa0JBQWtCLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVTtjQUNoQixHQUFHLEdBQUcsSUFBSSxDQUFDLFFBQVEsR0FBRyxHQUFHLEdBQUcsSUFBSSxDQUFDLFVBQVU7Y0FDM0MsRUFBRSxDQUFBO1FBQzVCLElBQUksQ0FBQyxhQUFhLENBQUMsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLEVBQUUsQ0FBQTtRQUNsRSxJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLElBQUksUUFBUSxDQUFBO0lBQy9DLENBQUM7SUFDRCxJQUFJLEdBQUcsR0FBRyxRQUFRLENBQUE7SUFDbEIsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBVSxHQUFHO1FBQ3JDLEdBQUcsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLEtBQUssR0FBRyxHQUFHLEdBQUcsS0FBSyxFQUFFLEdBQUcsQ0FBQyxFQUFFLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0lBQ3BFLENBQUMsQ0FBQyxDQUFBO0lBQ0YsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDbkIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLEVBQUUsQ0FBQyxDQUFBO0lBQ25DLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLE1BQU0sQ0FBQyxHQUFHLENBQUE7SUFDWixDQUFDO0FBQ0gsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsVUFBVSxJQUFJO0lBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDM0MsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBVSxJQUFJO0lBQ3ZDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDOUMsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEdBQUcsVUFBVSxJQUFJO0lBQ3ZDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDOUMsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsVUFBVSxJQUFJO0lBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDNUMsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEdBQUcsVUFBVSxJQUFJO0lBQ3JDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDNUMsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxLQUFLLEdBQUcsVUFBVSxJQUFJO0lBQ3RDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDN0MsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxHQUFHLEdBQUcsVUFBVSxJQUFJO0lBQ3BDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLENBQUE7QUFDM0MsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyxRQUFRLEdBQUcsVUFBVSxJQUFJO0lBQ3pDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUNoRCxDQUFDLENBQUE7QUFFRCxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxVQUFVLElBQUk7SUFDckMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUM1QyxDQUFDLENBQUE7QUFFRCxPQUFPLENBQUMsU0FBUyxDQUFDLE9BQU8sR0FBRyxVQUFVLElBQUk7SUFDeEMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUMvQyxDQUFDLENBQUE7QUFFRCxPQUFPLENBQUMsU0FBUyxDQUFDLElBQUksR0FBRyxVQUFVLENBQUMsRUFBRSxJQUFJO0lBQ3hDLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxZQUFZLEVBQUUsTUFBTSxDQUFDO1FBQzFDLElBQUksRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxFQUFFLENBQUM7S0FDOUIsRUFBRSxJQUFJLENBQUMsQ0FBQyxDQUFBO0FBQ1gsQ0FBQyxDQUFBO0FBRUQsT0FBTyxDQUFDLFNBQVMsQ0FBQyx3QkFBd0IsR0FBRztJQUMzQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQTtBQUNyQixDQUFDLENBQUE7QUFFRCxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsR0FBRyxVQUFVLElBQUk7SUFDekMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsQ0FBQTtBQUM3RCxDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCdcbnZhciBnaXRIb3N0cyA9IHJlcXVpcmUoJy4vZ2l0LWhvc3QtaW5mby5qcycpXG52YXIgZXh0ZW5kID0gT2JqZWN0LmFzc2lnbiB8fCByZXF1aXJlKCd1dGlsJykuX2V4dGVuZFxuXG52YXIgR2l0SG9zdCA9IG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHR5cGUsIHVzZXIsIGF1dGgsIHByb2plY3QsIGNvbW1pdHRpc2gsIGRlZmF1bHRSZXByZXNlbnRhdGlvbiwgb3B0cykge1xuICB2YXIgZ2l0SG9zdEluZm8gPSB0aGlzXG4gIGdpdEhvc3RJbmZvLnR5cGUgPSB0eXBlXG4gIE9iamVjdC5rZXlzKGdpdEhvc3RzW3R5cGVdKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBnaXRIb3N0SW5mb1trZXldID0gZ2l0SG9zdHNbdHlwZV1ba2V5XVxuICB9KVxuICBnaXRIb3N0SW5mby51c2VyID0gdXNlclxuICBnaXRIb3N0SW5mby5hdXRoID0gYXV0aFxuICBnaXRIb3N0SW5mby5wcm9qZWN0ID0gcHJvamVjdFxuICBnaXRIb3N0SW5mby5jb21taXR0aXNoID0gY29tbWl0dGlzaFxuICBnaXRIb3N0SW5mby5kZWZhdWx0ID0gZGVmYXVsdFJlcHJlc2VudGF0aW9uXG4gIGdpdEhvc3RJbmZvLm9wdHMgPSBvcHRzIHx8IHt9XG59XG5HaXRIb3N0LnByb3RvdHlwZSA9IHt9XG5cbkdpdEhvc3QucHJvdG90eXBlLmhhc2ggPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmNvbW1pdHRpc2ggPyAnIycgKyB0aGlzLmNvbW1pdHRpc2ggOiAnJ1xufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5fZmlsbCA9IGZ1bmN0aW9uICh0ZW1wbGF0ZSwgb3B0cykge1xuICBpZiAoIXRlbXBsYXRlKSByZXR1cm5cbiAgdmFyIHZhcnMgPSBleHRlbmQoe30sIG9wdHMpXG4gIG9wdHMgPSBleHRlbmQoZXh0ZW5kKHt9LCB0aGlzLm9wdHMpLCBvcHRzKVxuICB2YXIgc2VsZiA9IHRoaXNcbiAgT2JqZWN0LmtleXModGhpcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKHNlbGZba2V5XSAhPSBudWxsICYmIHZhcnNba2V5XSA9PSBudWxsKSB2YXJzW2tleV0gPSBzZWxmW2tleV1cbiAgfSlcbiAgdmFyIHJhd0F1dGggPSB2YXJzLmF1dGhcbiAgdmFyIHJhd0NvbWl0dGlzaCA9IHZhcnMuY29tbWl0dGlzaFxuICBPYmplY3Qua2V5cyh2YXJzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXJzW2tleV0gPSBlbmNvZGVVUklDb21wb25lbnQodmFyc1trZXldKVxuICB9KVxuICB2YXJzWydhdXRoQCddID0gcmF3QXV0aCA/IHJhd0F1dGggKyAnQCcgOiAnJ1xuICBpZiAob3B0cy5ub0NvbW1pdHRpc2gpIHtcbiAgICB2YXJzWycjY29tbWl0dGlzaCddID0gJydcbiAgICB2YXJzWycvdHJlZS9jb21taXR0aXNoJ10gPSAnJ1xuICAgIHZhcnNbJy9jb21pdHRpc2gnXSA9ICcnXG4gICAgdmFycy5jb21pdHRpc2ggPSAnJ1xuICB9IGVsc2Uge1xuICAgIHZhcnNbJyNjb21taXR0aXNoJ10gPSByYXdDb21pdHRpc2ggPyAnIycgKyByYXdDb21pdHRpc2ggOiAnJ1xuICAgIHZhcnNbJy90cmVlL2NvbW1pdHRpc2gnXSA9IHZhcnMuY29tbWl0dGlzaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgID8gJy8nICsgdmFycy50cmVlcGF0aCArICcvJyArIHZhcnMuY29tbWl0dGlzaFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJydcbiAgICB2YXJzWycvY29tbWl0dGlzaCddID0gdmFycy5jb21taXR0aXNoID8gJy8nICsgdmFycy5jb21taXR0aXNoIDogJydcbiAgICB2YXJzLmNvbW1pdHRpc2ggPSB2YXJzLmNvbW1pdHRpc2ggfHwgJ21hc3RlcidcbiAgfVxuICB2YXIgcmVzID0gdGVtcGxhdGVcbiAgT2JqZWN0LmtleXModmFycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmVzID0gcmVzLnJlcGxhY2UobmV3IFJlZ0V4cCgnW3tdJyArIGtleSArICdbfV0nLCAnZycpLCB2YXJzW2tleV0pXG4gIH0pXG4gIGlmIChvcHRzLm5vR2l0UGx1cykge1xuICAgIHJldHVybiByZXMucmVwbGFjZSgvXmdpdFsrXS8sICcnKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiByZXNcbiAgfVxufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5zc2ggPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gdGhpcy5fZmlsbCh0aGlzLnNzaHRlbXBsYXRlLCBvcHRzKVxufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5zc2h1cmwgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gdGhpcy5fZmlsbCh0aGlzLnNzaHVybHRlbXBsYXRlLCBvcHRzKVxufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5icm93c2UgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gdGhpcy5fZmlsbCh0aGlzLmJyb3dzZXRlbXBsYXRlLCBvcHRzKVxufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5kb2NzID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgcmV0dXJuIHRoaXMuX2ZpbGwodGhpcy5kb2NzdGVtcGxhdGUsIG9wdHMpXG59XG5cbkdpdEhvc3QucHJvdG90eXBlLmJ1Z3MgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gdGhpcy5fZmlsbCh0aGlzLmJ1Z3N0ZW1wbGF0ZSwgb3B0cylcbn1cblxuR2l0SG9zdC5wcm90b3R5cGUuaHR0cHMgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gdGhpcy5fZmlsbCh0aGlzLmh0dHBzdGVtcGxhdGUsIG9wdHMpXG59XG5cbkdpdEhvc3QucHJvdG90eXBlLmdpdCA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gIHJldHVybiB0aGlzLl9maWxsKHRoaXMuZ2l0dGVtcGxhdGUsIG9wdHMpXG59XG5cbkdpdEhvc3QucHJvdG90eXBlLnNob3J0Y3V0ID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgcmV0dXJuIHRoaXMuX2ZpbGwodGhpcy5zaG9ydGN1dHRlbXBsYXRlLCBvcHRzKVxufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5wYXRoID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgcmV0dXJuIHRoaXMuX2ZpbGwodGhpcy5wYXRodGVtcGxhdGUsIG9wdHMpXG59XG5cbkdpdEhvc3QucHJvdG90eXBlLnRhcmJhbGwgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gdGhpcy5fZmlsbCh0aGlzLnRhcmJhbGx0ZW1wbGF0ZSwgb3B0cylcbn1cblxuR2l0SG9zdC5wcm90b3R5cGUuZmlsZSA9IGZ1bmN0aW9uIChQLCBvcHRzKSB7XG4gIHJldHVybiB0aGlzLl9maWxsKHRoaXMuZmlsZXRlbXBsYXRlLCBleHRlbmQoe1xuICAgIHBhdGg6IFAucmVwbGFjZSgvXlsvXSsvZywgJycpXG4gIH0sIG9wdHMpKVxufVxuXG5HaXRIb3N0LnByb3RvdHlwZS5nZXREZWZhdWx0UmVwcmVzZW50YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB0aGlzLmRlZmF1bHRcbn1cblxuR2l0SG9zdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAob3B0cykge1xuICByZXR1cm4gKHRoaXNbdGhpcy5kZWZhdWx0XSB8fCB0aGlzLnNzaHVybCkuY2FsbCh0aGlzLCBvcHRzKVxufVxuIl19