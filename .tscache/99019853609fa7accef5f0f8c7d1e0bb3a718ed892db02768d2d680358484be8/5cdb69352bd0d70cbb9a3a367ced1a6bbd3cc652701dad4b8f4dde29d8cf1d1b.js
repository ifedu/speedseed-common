'use strict';
var path = require('path');
var which = require('which');
var LRU = require('lru-cache');
var commandCache = new LRU({ max: 50, maxAge: 30 * 1000 }); // Cache just for 30sec
function resolveCommand(command, noExtension) {
    var resolved;
    noExtension = !!noExtension;
    resolved = commandCache.get(command + '!' + noExtension);
    // Check if its resolved in the cache
    if (commandCache.has(command)) {
        return commandCache.get(command);
    }
    try {
        resolved = !noExtension ?
            which.sync(command) :
            which.sync(command, { pathExt: path.delimiter + (process.env.PATHEXT || '') });
    }
    catch (e) { }
    commandCache.set(command + '!' + noExtension, resolved);
    return resolved;
}
module.exports = resolveCommand;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxjcm9zcy1zcGF3blxcbGliXFx1dGlsXFxyZXNvbHZlQ29tbWFuZC5qcyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxjcm9zcy1zcGF3blxcbGliXFx1dGlsXFxyZXNvbHZlQ29tbWFuZC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzdCLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUUvQixJQUFJLFlBQVksR0FBRyxJQUFJLEdBQUcsQ0FBQyxFQUFFLEdBQUcsRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEVBQUUsR0FBRyxJQUFJLEVBQUUsQ0FBQyxDQUFDLENBQUUsdUJBQXVCO0FBRXBGLHdCQUF3QixPQUFPLEVBQUUsV0FBVztJQUN4QyxJQUFJLFFBQVEsQ0FBQztJQUViLFdBQVcsR0FBRyxDQUFDLENBQUMsV0FBVyxDQUFDO0lBQzVCLFFBQVEsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLE9BQU8sR0FBRyxHQUFHLEdBQUcsV0FBVyxDQUFDLENBQUM7SUFFekQscUNBQXFDO0lBQ3JDLEVBQUUsQ0FBQyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQzVCLE1BQU0sQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3JDLENBQUM7SUFFRCxJQUFJLENBQUM7UUFDRCxRQUFRLEdBQUcsQ0FBQyxXQUFXO1lBQ25CLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDO1lBQ25CLEtBQUssQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLEVBQUUsT0FBTyxFQUFFLElBQUksQ0FBQyxTQUFTLEdBQUcsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdkYsQ0FBQztJQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBYSxDQUFDO0lBRTNCLFlBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxHQUFHLEdBQUcsR0FBRyxXQUFXLEVBQUUsUUFBUSxDQUFDLENBQUM7SUFFeEQsTUFBTSxDQUFDLFFBQVEsQ0FBQztBQUNwQixDQUFDO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxjQUFjLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIHN0cmljdCc7XG5cbnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xudmFyIHdoaWNoID0gcmVxdWlyZSgnd2hpY2gnKTtcbnZhciBMUlUgPSByZXF1aXJlKCdscnUtY2FjaGUnKTtcblxudmFyIGNvbW1hbmRDYWNoZSA9IG5ldyBMUlUoeyBtYXg6IDUwLCBtYXhBZ2U6IDMwICogMTAwMCB9KTsgIC8vIENhY2hlIGp1c3QgZm9yIDMwc2VjXG5cbmZ1bmN0aW9uIHJlc29sdmVDb21tYW5kKGNvbW1hbmQsIG5vRXh0ZW5zaW9uKSB7XG4gICAgdmFyIHJlc29sdmVkO1xuXG4gICAgbm9FeHRlbnNpb24gPSAhIW5vRXh0ZW5zaW9uO1xuICAgIHJlc29sdmVkID0gY29tbWFuZENhY2hlLmdldChjb21tYW5kICsgJyEnICsgbm9FeHRlbnNpb24pO1xuXG4gICAgLy8gQ2hlY2sgaWYgaXRzIHJlc29sdmVkIGluIHRoZSBjYWNoZVxuICAgIGlmIChjb21tYW5kQ2FjaGUuaGFzKGNvbW1hbmQpKSB7XG4gICAgICAgIHJldHVybiBjb21tYW5kQ2FjaGUuZ2V0KGNvbW1hbmQpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICAgIHJlc29sdmVkID0gIW5vRXh0ZW5zaW9uID9cbiAgICAgICAgICAgIHdoaWNoLnN5bmMoY29tbWFuZCkgOlxuICAgICAgICAgICAgd2hpY2guc3luYyhjb21tYW5kLCB7IHBhdGhFeHQ6IHBhdGguZGVsaW1pdGVyICsgKHByb2Nlc3MuZW52LlBBVEhFWFQgfHwgJycpIH0pO1xuICAgIH0gY2F0Y2ggKGUpIHsgLyogZW1wdHkgKi8gfVxuXG4gICAgY29tbWFuZENhY2hlLnNldChjb21tYW5kICsgJyEnICsgbm9FeHRlbnNpb24sIHJlc29sdmVkKTtcblxuICAgIHJldHVybiByZXNvbHZlZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXNvbHZlQ29tbWFuZDtcbiJdfQ==