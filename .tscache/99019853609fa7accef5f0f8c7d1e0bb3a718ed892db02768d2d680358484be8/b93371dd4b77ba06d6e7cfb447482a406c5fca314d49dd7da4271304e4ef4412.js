'use strict';
exports = module.exports = cliWidth;
function normalizeOpts(options) {
    var defaultOpts = {
        defaultWidth: 0,
        output: process.stdout,
        tty: require('tty')
    };
    if (!options) {
        return defaultOpts;
    }
    else {
        Object.keys(defaultOpts).forEach(function (key) {
            if (!options[key]) {
                options[key] = defaultOpts[key];
            }
        });
        return options;
    }
}
function cliWidth(options) {
    var opts = normalizeOpts(options);
    if (opts.output.getWindowSize) {
        return opts.output.getWindowSize()[0] || opts.defaultWidth;
    }
    else {
        if (opts.tty.getWindowSize) {
            return opts.tty.getWindowSize()[1] || opts.defaultWidth;
        }
        else {
            if (opts.output.columns) {
                return opts.output.columns;
            }
            else {
                if (process.env.CLI_WIDTH) {
                    var width = parseInt(process.env.CLI_WIDTH, 10);
                    if (!isNaN(width) && width !== 0) {
                        return width;
                    }
                }
            }
            return opts.defaultWidth;
        }
    }
}
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxjbGktd2lkdGhcXGluZGV4LmpzIiwic291cmNlcyI6WyJDOlxcVXNlcnNcXGlmZWR1XFxBcHBEYXRhXFxSb2FtaW5nXFxudm1cXHY4LjQuMFxcbm9kZV9tb2R1bGVzXFxnZW5lcmF0b3Itc3BlZWRzZWVkXFxub2RlX21vZHVsZXNcXGNsaS13aWR0aFxcaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWSxDQUFDO0FBRWIsT0FBTyxHQUFHLE1BQU0sQ0FBQyxPQUFPLEdBQUcsUUFBUSxDQUFDO0FBRXBDLHVCQUF1QixPQUFPO0lBQzVCLElBQUksV0FBVyxHQUFHO1FBQ2hCLFlBQVksRUFBRSxDQUFDO1FBQ2YsTUFBTSxFQUFFLE9BQU8sQ0FBQyxNQUFNO1FBQ3RCLEdBQUcsRUFBRSxPQUFPLENBQUMsS0FBSyxDQUFDO0tBQ3BCLENBQUM7SUFFRixFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7UUFDYixNQUFNLENBQUMsV0FBVyxDQUFDO0lBQ3JCLENBQUM7SUFBQyxJQUFJLENBQUMsQ0FBQztRQUNOLE1BQU0sQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsR0FBRztZQUM1QyxFQUFFLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQ2xCLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBRyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDbEMsQ0FBQztRQUNILENBQUMsQ0FBQyxDQUFDO1FBRUgsTUFBTSxDQUFDLE9BQU8sQ0FBQztJQUNqQixDQUFDO0FBQ0gsQ0FBQztBQUVELGtCQUFrQixPQUFPO0lBQ3ZCLElBQUksSUFBSSxHQUFHLGFBQWEsQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUVsQyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7UUFDOUIsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQztJQUM3RCxDQUFDO0lBQUMsSUFBSSxDQUFDLENBQUM7UUFDTixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDM0IsTUFBTSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQztRQUMxRCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7Z0JBQ3hCLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQztZQUM3QixDQUFDO1lBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ04sRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDO29CQUMxQixJQUFJLEtBQUssR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7b0JBRWhELEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO3dCQUNqQyxNQUFNLENBQUMsS0FBSyxDQUFDO29CQUNmLENBQUM7Z0JBQ0gsQ0FBQztZQUNILENBQUM7WUFFRCxNQUFNLENBQUMsSUFBSSxDQUFDLFlBQVksQ0FBQztRQUMzQixDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7QUFBQSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBjbGlXaWR0aDtcblxuZnVuY3Rpb24gbm9ybWFsaXplT3B0cyhvcHRpb25zKSB7XG4gIHZhciBkZWZhdWx0T3B0cyA9IHtcbiAgICBkZWZhdWx0V2lkdGg6IDAsXG4gICAgb3V0cHV0OiBwcm9jZXNzLnN0ZG91dCxcbiAgICB0dHk6IHJlcXVpcmUoJ3R0eScpXG4gIH07XG5cbiAgaWYgKCFvcHRpb25zKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRPcHRzO1xuICB9IGVsc2Uge1xuICAgIE9iamVjdC5rZXlzKGRlZmF1bHRPcHRzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgIGlmICghb3B0aW9uc1trZXldKSB7XG4gICAgICAgIG9wdGlvbnNba2V5XSA9IGRlZmF1bHRPcHRzW2tleV07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3B0aW9ucztcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGlXaWR0aChvcHRpb25zKSB7XG4gIHZhciBvcHRzID0gbm9ybWFsaXplT3B0cyhvcHRpb25zKTtcblxuICBpZiAob3B0cy5vdXRwdXQuZ2V0V2luZG93U2l6ZSkge1xuICAgIHJldHVybiBvcHRzLm91dHB1dC5nZXRXaW5kb3dTaXplKClbMF0gfHwgb3B0cy5kZWZhdWx0V2lkdGg7XG4gIH0gZWxzZSB7XG4gICAgaWYgKG9wdHMudHR5LmdldFdpbmRvd1NpemUpIHtcbiAgICAgIHJldHVybiBvcHRzLnR0eS5nZXRXaW5kb3dTaXplKClbMV0gfHwgb3B0cy5kZWZhdWx0V2lkdGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvcHRzLm91dHB1dC5jb2x1bW5zKSB7XG4gICAgICAgIHJldHVybiBvcHRzLm91dHB1dC5jb2x1bW5zO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52LkNMSV9XSURUSCkge1xuICAgICAgICAgIHZhciB3aWR0aCA9IHBhcnNlSW50KHByb2Nlc3MuZW52LkNMSV9XSURUSCwgMTApO1xuXG4gICAgICAgICAgaWYgKCFpc05hTih3aWR0aCkgJiYgd2lkdGggIT09IDApIHtcbiAgICAgICAgICAgIHJldHVybiB3aWR0aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG9wdHMuZGVmYXVsdFdpZHRoO1xuICAgIH1cbiAgfVxufTtcbiJdfQ==