'use strict';
var path = require('path');
var globby = require('globby');
var multimatch = require('multimatch');
var util = require('../util');
function deleteFile(path, store) {
    var file = store.get(path);
    file.state = 'deleted';
    file.contents = null;
    store.add(file);
}
module.exports = function (paths, options) {
    if (!Array.isArray(paths)) {
        paths = [paths];
    }
    paths = paths.map(function (filePath) {
        return path.resolve(filePath);
    });
    paths = util.globify(paths);
    options = options || {};
    var globOptions = options.globOptions || {};
    var files = globby.sync(paths, globOptions);
    files.forEach(function (file) {
        deleteFile(file, this.store);
    }.bind(this));
    this.store.each(function (file) {
        if (multimatch([file.path], paths).length !== 0) {
            deleteFile(file.path, this.store);
        }
    }.bind(this));
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxtZW0tZnMtZWRpdG9yXFxsaWJcXGFjdGlvbnNcXGRlbGV0ZS5qcyIsInNvdXJjZXMiOlsiQzpcXFVzZXJzXFxpZmVkdVxcQXBwRGF0YVxcUm9hbWluZ1xcbnZtXFx2OC40LjBcXG5vZGVfbW9kdWxlc1xcZ2VuZXJhdG9yLXNwZWVkc2VlZFxcbm9kZV9tb2R1bGVzXFxtZW0tZnMtZWRpdG9yXFxsaWJcXGFjdGlvbnNcXGRlbGV0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxZQUFZLENBQUM7QUFFYixJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsSUFBSSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQy9CLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxZQUFZLENBQUMsQ0FBQztBQUN2QyxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFFOUIsb0JBQW9CLElBQUksRUFBRSxLQUFLO0lBQzdCLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDM0IsSUFBSSxDQUFDLEtBQUssR0FBRyxTQUFTLENBQUM7SUFDdkIsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUM7SUFDckIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUNsQixDQUFDO0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLEtBQUssRUFBRSxPQUFPO0lBQ3ZDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDMUIsS0FBSyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbEIsQ0FBQztJQUNELEtBQUssR0FBRyxLQUFLLENBQUMsR0FBRyxDQUFDLFVBQVUsUUFBUTtRQUNsQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUMsQ0FBQztJQUNILEtBQUssR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzVCLE9BQU8sR0FBRyxPQUFPLElBQUksRUFBRSxDQUFDO0lBRXhCLElBQUksV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDO0lBQzVDLElBQUksS0FBSyxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0lBQzVDLEtBQUssQ0FBQyxPQUFPLENBQUMsVUFBVSxJQUFJO1FBQzFCLFVBQVUsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQy9CLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUVkLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSTtRQUM1QixFQUFFLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUMsTUFBTSxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDaEQsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLENBQUM7SUFDSCxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7QUFDaEIsQ0FBQyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBnbG9iYnkgPSByZXF1aXJlKCdnbG9iYnknKTtcbnZhciBtdWx0aW1hdGNoID0gcmVxdWlyZSgnbXVsdGltYXRjaCcpO1xudmFyIHV0aWwgPSByZXF1aXJlKCcuLi91dGlsJyk7XG5cbmZ1bmN0aW9uIGRlbGV0ZUZpbGUocGF0aCwgc3RvcmUpIHtcbiAgdmFyIGZpbGUgPSBzdG9yZS5nZXQocGF0aCk7XG4gIGZpbGUuc3RhdGUgPSAnZGVsZXRlZCc7XG4gIGZpbGUuY29udGVudHMgPSBudWxsO1xuICBzdG9yZS5hZGQoZmlsZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHBhdGhzLCBvcHRpb25zKSB7XG4gIGlmICghQXJyYXkuaXNBcnJheShwYXRocykpIHtcbiAgICBwYXRocyA9IFtwYXRoc107XG4gIH1cbiAgcGF0aHMgPSBwYXRocy5tYXAoZnVuY3Rpb24gKGZpbGVQYXRoKSB7XG4gICAgcmV0dXJuIHBhdGgucmVzb2x2ZShmaWxlUGF0aCk7XG4gIH0pO1xuICBwYXRocyA9IHV0aWwuZ2xvYmlmeShwYXRocyk7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBnbG9iT3B0aW9ucyA9IG9wdGlvbnMuZ2xvYk9wdGlvbnMgfHwge307XG4gIHZhciBmaWxlcyA9IGdsb2JieS5zeW5jKHBhdGhzLCBnbG9iT3B0aW9ucyk7XG4gIGZpbGVzLmZvckVhY2goZnVuY3Rpb24gKGZpbGUpIHtcbiAgICBkZWxldGVGaWxlKGZpbGUsIHRoaXMuc3RvcmUpO1xuICB9LmJpbmQodGhpcykpO1xuXG4gIHRoaXMuc3RvcmUuZWFjaChmdW5jdGlvbiAoZmlsZSkge1xuICAgIGlmIChtdWx0aW1hdGNoKFtmaWxlLnBhdGhdLCBwYXRocykubGVuZ3RoICE9PSAwKSB7XG4gICAgICBkZWxldGVGaWxlKGZpbGUucGF0aCwgdGhpcy5zdG9yZSk7XG4gICAgfVxuICB9LmJpbmQodGhpcykpO1xufTtcbiJdfQ==